import java.awt.event.KeyEvent;

public class Bomb {
	private int duration;
	// direction
	private int x;
	private int y;
	private double width;
	private boolean exploded;
	private boolean doneExploding;
	private CountDown cd;
	private String pic;

	/**
	 * Creates a bomb which starts counting down when created
	 * @param duration  the time before it explodes in seconds
	 * @param x  the x coordinate
	 * @param y  the y coordinate
	 * @param width  the width in pixels when diplayed
	 * @param picName the name of the picture to be displayed
	 */
	public Bomb(int duration, int x, int y, double width, String picName) {
		//for displaying purposes
		StdDraw.setXscale(0, 900);
		StdDraw.setYscale(0, 900);
		this.duration = duration;
		this.x = x;
		this.y = y;
		this.width = width;
		//these track the status of the bomb
		exploded = false;
		doneExploding = false;
		cd = new CountDown(duration);
		pic = picName;

	}

	/**
	 * checks if bomb has exploded, updates variable, and resets timer
	 */
	public void updateBomb() {
		if (cd.check()) {
			exploded = true;
			cd.reset(0);
		}
	}
	/**
	 * checks if bomb has finished exploding and updates variable
	 */
	public void updateExplosion() {
		if (cd.check()) {
			doneExploding = true;
		}
	}

	/**
	 * 
	 * @return exploded
	 */
	public boolean isExploded() {
		return exploded;
	}

	/**
	 * 
	 * @return doneExploding
	 */
	public boolean isDoneExploding() {
		return doneExploding;
	}

	/**
	 * 
	 * @return x
	 */
	public int getX() {
		return x;
	}

	/**
	 * @return y
	 */
	public int getY() {
		return y;
	}

	/**
	 * 
	 * @return width
	 */
	public double getWidth() {
		return width;
	}

	/**
	 * draws bomb depending on what stage it is in
	 * @param xCoor 
	 * @param yCoor
	 * @param name name of picture to draw
	 * @param xcv world
	 */
	public void draw(int xCoor, int yCoor, String name, World xcv) {

		if(!exploded){
			drawBomb();
			updateBomb();
		}
		else{
			if(!doneExploding){
				drawExplosion();
				updateExplosion();
	
			}
		}

	}

	/**
	 * draws unexploded bomb
	 * @param xCoor
	 * @param yCoor
	 * @param name
	 * @param xcv
	 */
	public void drawBomb(int xCoor, int yCoor, String name, World xcv) {
		StdDraw.picture(x, y, pic, 60, 60);

	}

	/**
	 * draws and animates explosion
	 * @param xCoor
	 * @param yCoor
	 * @param name
	 * @param xcv
	 */
	public void drawExplosion(int xCoor, int yCoor, String name, World xcv) {

		StdDraw.picture(getX(), getY(), "Explosion.png",60,60);
		for(int i = (int)getX(); i<=(int)getX()+60; i+=60){
			if(xcv.isValid(i,getY())){
				StdDraw.picture(i, getY(), "Explosion.png", 60, 60);
			}else{
				break;
			}
		}
		for(int i = (int)getX(); i>=(int)getX()-60; i-=60){
			if(xcv.isValid(i,getY())){
				StdDraw.picture(i, getY(), "Explosion.png", 60, 60);
			}else{
				break;
			}

		}
		for(int j = (int)getY(); j>=(int)getY()-60; j-=60){
			if(xcv.isValid(getX(),j)){
				StdDraw.picture(getX(), j, "Explosion.png", 60, 60);
			}else{
				break;
			}
		}
		for(int j = (int)getY(); j<=(int)getY()+60; j+=60){
			if(xcv.isValid(getX(),j)){
				StdDraw.picture(getX(), j, "Explosion.png", 60, 60);
			}else{
				
				break;
			}
		}
		StdDraw.show();

	}

}
